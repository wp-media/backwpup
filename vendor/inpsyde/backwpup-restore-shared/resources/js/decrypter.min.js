window.BWU=window.BWU||{},((n,c,s)=>{function o(){this.containerEl.style.display="block"}function r(){this.keyField.value="",this.keyField.setAttribute("value","")}function i(t){"invalid"===t&&!function(){s(this.keyField).not(":focus").focus()}.call(this)}var d={needDecryption:function(t){o.call(this),i.call(this,t)},hide:function(){this.containerEl.style.display="none"},destruct:function(){this.hide(),r.call(this)},decrypt:function(t){var t=c.extend(t,{decryption_key:this.keyField.value,action:"decrypt",controller:"decrypt"}),i=function(t){t.success?(this.hide(),r.call(this),s("body").trigger(this.ACTION_DECRYPTION_SUCCESS,t)):(o.call(this),n.Functions.printMessageError(t.data.message,this.containerEl),s("body").trigger(this.ACTION_DECRYPTION_FAILED,t))}.bind(this),e=function(t){this.hide(),r.call(this),s("body").trigger(this.ACTION_DECRYPTION_FAILED,t)}.bind(this);this.hide(),s.ajax({url:this.url,data:t,method:"POST",success:i,error:e})},construct:function(t,i,e){return c.bindAll(this,"needDecryption","decrypt","destruct","hide"),!(!i||!e)&&(this.url=t,this.containerEl=i,this.keyField=e,this)}};n.DecrypterFactory=function(t,i,e){return Object.create(d,{ACTION_DECRYPTION_SUCCESS:n.Functions.makeConstant("backwpup.decryption_access"),ACTION_DECRYPTION_FAILED:n.Functions.makeConstant("backwpup.decryption_failed")}).construct(t,i,e)}})(window.BWU,window._,window.jQuery);