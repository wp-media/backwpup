window.BWU=window.BWU||{},window.BWU.Restore=window.BWU.Restore||{},window.BWU.Restore.Factory=window.BWU.Restore.Factory||{},function(n,e,o){"use strict";var i={onFail:function(t){return n.Functions.printMessageError(t.responseJSON.data.message,o("#restore_step")),this},retrieve:function(t){return o.ajax({type:"POST",url:this.url,cache:!1,dataType:"json",data:{controller:"job",action:"fetch_url",backwpup_action_nonce:this.nonce}}).done(t).fail(this.onFail),this},save:function(t,n,e){return o.ajax({type:"POST",url:this.url,cache:!1,dataType:"json",data:{controller:"job",action:"save_migration",old_url:t,new_url:n,backwpup_action_nonce:this.nonce}}).done(e).fail(this.onFail),this},init:function(){return this},construct:function(t,n){return e.bindAll(this,"onFail","retrieve","save","init"),this.nonce=n,this.url=t,this}};n.Restore.FactoryMigrate=function(t,n){return Object.create(i).construct(t,n)}}(window.BWU,window._,window.jQuery);