document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(e){const t=e.target.closest("#js_backwpup_add_new_backup");var n;t&&(t.classList.contains("disabled")||((n=t).classList.add("disabled","loading"),n.style.pointerEvents="none",e.target.classList.add("bg-grey-200"),requestWPApi(backwpupApi.addjob,{type:"mixed"},function(e){!0===e.success&&(document.getElementById("backwpup-backup-now").disabled=!1,loadBackupsListingAndPagination(getUrlParameter("page_num",1)),backwpupDisplaySettingsToast("success",e.message),requestWPApi(backwpupApi.getjobslist,{},function(e){const n=document.querySelector("#backwup-next-scheduled-backups"),a=document.querySelector("#backwpup_dynamic_response_content");n.innerHTML=e;const s=a.innerHTML;n.insertAdjacentHTML("beforeend",s),function(e){e.classList.remove("disabled","loading"),e.style.pointerEvents="auto"}(t),t.classList.remove("bg-grey-200")},"GET"))},"POST",function(e,t){backwpupDisplaySettingsToast("error",e.responseText)})))}),window._jobButtonHandlerAttached||(document.addEventListener("click",function(e){const t=e.target.closest("[data-job-id]");t&&!e.target.classList.contains("js-backwpup-mixed-data-settings")&&(window.currentPrimaryJobId=t.getAttribute("data-job-id"));let n=e.target.closest(".js-backwpup-mixed-data-settings");if(n){e.preventDefault(),e.stopImmediatePropagation();const t=n.querySelector(".js-backwpup-mixed-data-settings-checkbox"),a=document.querySelectorAll(".js-backwpup-mixed-data-settings .js-backwpup-mixed-data-settings-checkbox"),s=Array.from(a).filter(e=>e.checked).length;document.querySelectorAll("button[data-mixed-data-content]");if(t.checked&&1===s)return;t.checked=!t.checked,t.dispatchEvent(new Event("change"));const c=Array.from(a).filter(e=>e.checked).map(e=>e.value);let d;d=1===c.length?c[0]:"mixed",$data={type:d};const o=backwpupApi.updates_backup_type.replace("%d",currentPrimaryJobId);requestWPApi(o,$data,function(e){200===e.status&&requestWPApi(backwpupApi.getjobslist,{},function(e){const t=document.querySelector("#backwup-next-scheduled-backups"),n=document.querySelector("#backwpup_dynamic_response_content");t.innerHTML=e;const a=n.innerHTML;t.insertAdjacentHTML("beforeend",a)},"GET")},"POST")}let a=document.querySelector(".js-data-main-setting");const s={files:document.querySelector(".js-file-settings-section"),database:document.querySelector(".js-database-settings-section")},c=e.target.closest("[data-toggle-setting-panel]")?.dataset.toggleSettingPanel;c&&s[c]&&(e.preventDefault(),a.classList.toggle("hidden"),s[c].classList.toggle("hidden"))}),window._jobButtonHandlerAttached=!0)});